<aside
  class="fixed lg:static inset-y-0 left-0 w-64 h-full bg-primary flex flex-col flex-shrink-0 transition-transform duration-300 z-50 lg:translate-x-0"
  [class.-translate-x-full]="!sidebarService.isOpen()"
  [class.translate-x-0]="sidebarService.isOpen()"
>
  <!-- Mobile Close Button -->
  <button
    (click)="sidebarService.close()"
    class="absolute top-4 right-4 p-2 text-white/50 hover:text-white lg:hidden"
    type="button"
  >
    <lucide-icon [img]="icons.X" class="w-6 h-6"></lucide-icon>
  </button>
  <!-- Fixed Header -->
  <div class="px-6 pt-6 pb-4 flex-shrink-0">
    <div class="flex items-center gap-3" *ngIf="settings$ | async as settings">
      <div class="bg-white/10 p-2 rounded-lg">
        <img
          *ngIf="settings.logoUrl"
          [src]="imageUrlService.getImageUrl(settings.logoUrl)"
          class="w-8 h-8 object-contain"
          alt="Logo"
        />
        <lucide-icon
          *ngIf="!settings.logoUrl"
          [img]="icons.Store"
          class="w-5 h-5 text-white"
        ></lucide-icon>
      </div>
      <div>
        <h1 class="text-white text-lg font-bold leading-tight">
          {{ settings.websiteName || "Admin Console" }}
        </h1>
        <p class="text-gray-400 text-xs font-medium">Admin Console</p>
      </div>
    </div>
  </div>

  <!-- Scrollable Navigation -->
  <div
    class="flex-1 overflow-y-auto px-6 pb-4 scrollbar-thin scrollbar-thumb-white/20 scrollbar-track-transparent"
  >
    <nav class="flex flex-col gap-1">
      <a
        *ngFor="let item of topItems"
        class="flex items-center gap-3 px-4 py-3 rounded-lg transition-colors group"
        [routerLink]="item.route"
        routerLinkActive="bg-accent text-primary"
        #rla="routerLinkActive"
        [ngClass]="
          rla.isActive
            ? 'bg-accent text-primary'
            : 'text-gray-300 hover:bg-white/10 hover:text-white'
        "
        [routerLinkActiveOptions]="{ exact: false }"
      >
        <lucide-icon [img]="item.icon" class="w-5 h-5"></lucide-icon>
        <span class="text-sm font-medium">{{ item.label }}</span>
      </a>

      <!-- Products Dropdown -->
      <div class="flex flex-col gap-1">
        <button
          type="button"
          class="flex items-center justify-between gap-3 px-4 py-3 rounded-lg transition-colors group w-full text-left"
          (click)="toggleProductsMenu()"
          routerLinkActive="bg-accent text-primary"
          [routerLinkActiveOptions]="{ exact: false }"
          #productsActive="routerLinkActive"
          [ngClass]="
            productsActive.isActive
              ? 'bg-accent text-primary'
              : 'text-gray-300 hover:bg-white/10 hover:text-white'
          "
        >
          <div class="flex items-center gap-3">
            <lucide-icon
              [img]="icons.ShoppingBag"
              class="w-5 h-5"
            ></lucide-icon>
            <span class="text-sm font-medium">Products</span>
          </div>
          <lucide-icon
            [img]="isProductsMenuOpen ? icons.ChevronUp : icons.ChevronDown"
            class="w-4 h-4"
          ></lucide-icon>
        </button>
        <div class="pl-10 flex flex-col gap-1 mb-2" *ngIf="isProductsMenuOpen">
          <a
            class="px-3 py-2 text-sm font-medium text-gray-300 hover:text-white transition-colors"
            routerLink="/admin/products"
            routerLinkActive="text-white bg-white/10 rounded-md"
            [routerLinkActiveOptions]="{ exact: true }"
          >
            All Products
          </a>
          <a
            class="px-3 py-2 text-sm font-medium text-gray-300 hover:text-white transition-colors"
            routerLink="/admin/products/categories"
            routerLinkActive="text-white bg-white/10 rounded-md"
            [routerLinkActiveOptions]="{ exact: true }"
          >
            Categories
          </a>
          <a
            class="px-3 py-2 text-sm font-medium text-gray-300 hover:text-white transition-colors"
            routerLink="/admin/products/sub-categories"
            routerLinkActive="text-white bg-white/10 rounded-md"
            [routerLinkActiveOptions]="{ exact: true }"
          >
            Sub Categories
          </a>
          <a
            class="px-3 py-2 text-sm font-medium text-gray-300 hover:text-white transition-colors"
            routerLink="/admin/products/inventory"
            routerLinkActive="text-white bg-white/10 rounded-md"
            [routerLinkActiveOptions]="{ exact: true }"
          >
            Inventory
          </a>
        </div>
      </div>

      <a
        *ngFor="let item of navItems"
        class="flex items-center gap-3 px-4 py-3 rounded-lg transition-colors group"
        [routerLink]="item.route"
        routerLinkActive="bg-accent text-primary"
        #rlaSecondary="routerLinkActive"
        [ngClass]="
          rlaSecondary.isActive
            ? 'bg-accent text-primary'
            : 'text-gray-300 hover:bg-white/10 hover:text-white'
        "
        [routerLinkActiveOptions]="{ exact: false }"
      >
        <lucide-icon [img]="item.icon" class="w-5 h-5"></lucide-icon>
        <span class="text-sm font-medium">{{ item.label }}</span>
      </a>
    </nav>
  </div>

  <!-- Fixed Footer -->
  <div class="p-6 border-t border-white/10 flex-shrink-0 bg-primary">
    <nav class="flex flex-col gap-2">
      <a
        class="flex items-center gap-3 px-4 py-3 rounded-lg text-primary hover:bg-white/10 hover:text-white transition-colors group mb-2 border border-white/10 bg-white/5"
        routerLink="/"
        target="_blank"
      >
        <lucide-icon [img]="icons.Eye" class="w-5 h-5"></lucide-icon>
        <span class="text-sm font-medium">View Live Shop</span>
      </a>

      <a
        *ngFor="let item of bottomItems"
        class="flex items-center gap-3 px-4 py-3 rounded-lg transition-colors group"
        [routerLink]="item.route"
        routerLinkActive="bg-accent text-primary"
        #rlaBottom="routerLinkActive"
        [ngClass]="
          rlaBottom.isActive
            ? 'bg-accent text-primary'
            : 'text-gray-300 hover:bg-white/10 hover:text-white'
        "
        [routerLinkActiveOptions]="{ exact: true }"
      >
        <lucide-icon [img]="item.icon" class="w-5 h-5"></lucide-icon>
        <span class="text-sm font-medium">{{ item.label }}</span>
      </a>
      <a
        class="flex items-center gap-3 px-4 py-3 rounded-lg text-red-300 hover:bg-red-500/10 hover:text-red-200 transition-colors group"
        routerLink="/admin/logout"
      >
        <lucide-icon [img]="icons.LogOut" class="w-5 h-5"></lucide-icon>
        <span class="text-sm font-medium">Logout</span>
      </a>
    </nav>
    <div class="mt-6 flex items-center gap-3 px-4">
      <div
        class="bg-center bg-no-repeat bg-cover rounded-full size-8 ring-2 ring-white/20"
        data-alt="Admin user profile picture showing a smiling face"
        style="
          background-image: url(&quot;https://lh3.googleusercontent.com/aida-public/AB6AXuArAP0MWy_gb6uUPqM-T5rVuIYqseD5U_AH62taViQsQ6hXfk3_u0HfyhJtNYGsmjPJoCvYL0ExCORpx_wU-dbq1I8TMzvPxZd_Ggyh5gxt7AR3pTXEt_64ACT4InTO3O2KEUkSwFx-B_SzaXTZKlDrHpu5_Nq1osNH54LFpS1pmYzgMaRS2_ZIBKLEHW5hPxYMX0qXWYGtXBm5wbzM2mFX2JF7SUA5YgqoBl7zeRNtoFsn4lSN4nVV61hPuJIXaYeRF7zcq8ziyw0&quot;);
        "
      ></div>
      <div class="flex flex-col">
        <p class="text-white text-sm font-medium">Admin User</p>
        <p class="text-gray-400 text-xs">admin&#64;muslim.com</p>
      </div>
    </div>
  </div>
</aside>

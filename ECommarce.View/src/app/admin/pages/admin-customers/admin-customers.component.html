<div class="flex-1 overflow-y-auto p-4 md:p-8 space-y-6 scroll-smooth">
  <!-- PageHeading -->
  <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
    <div>
      <h2
        class="text-primary dark:text-white text-3xl md:text-4xl font-black leading-tight tracking-tight"
      >
        Customers
      </h2>
      <p class="text-gray-500 dark:text-gray-400 text-sm mt-1">
        View and manage your customer base.
      </p>
    </div>
  </div>

  <!-- Filters & Search -->
  <div
    class="bg-surface-light dark:bg-surface-dark p-4 rounded-xl border border-gray-200 dark:border-gray-700"
  >
    <div class="w-full lg:w-96 relative">
      <div
        class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
      >
        <lucide-icon
          [img]="icons.Search"
          class="w-4 h-4 text-gray-400"
        ></lucide-icon>
      </div>
      <input
        class="block w-full pl-10 pr-3 py-2.5 border-none rounded-lg bg-background-light dark:bg-background-dark text-primary dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-primary/20 text-sm"
        placeholder="Search by Name or Phone"
        type="text"
        [formControl]="searchControl"
      />
    </div>
  </div>

  <!-- Customers Table -->
  <div
    class="bg-surface-light dark:bg-surface-dark border border-gray-200 dark:border-gray-700 rounded-xl overflow-hidden shadow-sm flex flex-col flex-1 min-h-[400px]"
  >
    <div class="overflow-x-auto">
      <table class="w-full text-left border-collapse">
        <thead>
          <tr
            class="border-b border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50 text-xs uppercase tracking-wider text-gray-500 font-semibold"
          >
            <th class="p-4">Customer</th>
            <th class="p-4">Phone</th>
            <th class="p-4">Address</th>
            <th class="p-4 text-center">Status</th>
            <th class="p-4">Details</th>
            <th class="p-4 text-right">Actions</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-100 dark:divide-gray-800 text-sm">
          <tr *ngIf="isLoading">
            <td colspan="6" class="p-8 text-center text-gray-500">
              Loading customers...
            </td>
          </tr>
          <tr *ngIf="!isLoading && customers.length === 0">
            <td colspan="6" class="p-8 text-center text-gray-500">
              No customers found.
            </td>
          </tr>
          <tr
            *ngFor="let customer of customers"
            class="hover:bg-accent/10 dark:hover:bg-gray-800/50 transition-colors"
          >
            <td class="p-4 font-medium text-primary dark:text-white">
              <div class="flex items-center gap-3">
                <div
                  class="w-8 h-8 rounded-full bg-primary/10 text-primary flex items-center justify-center text-xs font-bold"
                >
                  {{ getInitials(customer.name) }}
                </div>
                <span>{{ customer.name }}</span>
              </div>
            </td>
            <td class="p-4 text-gray-500 dark:text-gray-400">
              {{ customer.phone }}
            </td>
            <td
              class="p-4 text-gray-500 dark:text-gray-400 max-w-[200px] truncate"
              [title]="customer.address"
            >
              {{ customer.address }}
            </td>
            <td class="p-4 text-center">
              <span
                *ngIf="customer.isSuspicious"
                class="px-2 py-1 rounded-full text-[10px] font-bold uppercase bg-red-100 text-red-600 border border-red-200"
                title="Marked as suspicious/fake"
              >
                ⚠️ Suspicious
              </span>
              <span
                *ngIf="!customer.isSuspicious"
                class="px-2 py-1 rounded-full text-[10px] font-bold uppercase bg-green-100 text-green-600 border border-green-200"
              >
                Safe
              </span>
            </td>
            <td
              class="p-4 text-gray-500 dark:text-gray-400 max-w-[150px] truncate"
              [title]="customer.deliveryDetails || '—'"
            >
              {{ customer.deliveryDetails || "—" }}
            </td>
            <td class="p-4 text-right">
              <button
                (click)="toggleSuspicious(customer)"
                [class]="
                  customer.isSuspicious
                    ? 'text-green-600 hover:text-green-700'
                    : 'text-red-500 hover:text-red-600'
                "
                class="text-xs font-semibold underline"
              >
                {{ customer.isSuspicious ? "Mark Safe" : "Flag Suspicious" }}
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div
      class="p-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between bg-surface-light dark:bg-surface-dark mt-auto"
    >
      <p class="text-sm text-gray-500 dark:text-gray-400">
        Showing
        <span class="font-medium text-primary dark:text-white">{{
          paginationStart
        }}</span>
        to
        <span class="font-medium text-primary dark:text-white">{{
          paginationEnd
        }}</span>
        of
        <span class="font-medium text-primary dark:text-white">{{
          totalResults | number
        }}</span>
        results
      </p>
      <div class="flex gap-2">
        <button
          class="px-3 py-1 rounded border border-gray-200 dark:border-gray-700 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 disabled:opacity-50 transition-colors"
          type="button"
          [disabled]="page === 1"
          (click)="goToPreviousPage()"
        >
          Previous
        </button>
        <button
          class="px-3 py-1 rounded border border-gray-200 dark:border-gray-700 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"
          type="button"
          [disabled]="page === totalPages"
          (click)="goToNextPage()"
        >
          Next
        </button>
      </div>
    </div>
  </div>
</div>

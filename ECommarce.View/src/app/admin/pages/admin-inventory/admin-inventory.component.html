<div
  class="flex-1 overflow-y-auto p-4 md:p-8 space-y-8 scroll-smooth bg-gray-50 dark:bg-[#0b1120] min-h-screen"
>
  <!-- Header -->
  <div class="flex flex-col md:flex-row md:items-center justify-between gap-6">
    <div>
      <h2
        class="text-primary dark:text-white text-3xl md:text-4xl font-black leading-tight tracking-tight"
      >
        Inventory
      </h2>
      <p class="text-gray-500 dark:text-gray-400 text-sm mt-2">
        Manage stock levels across all product variants.
      </p>
    </div>

    <div class="relative w-full md:w-96 group">
      <div
        class="absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none transition-colors group-focus-within:text-primary"
      >
        <lucide-icon
          [img]="icons.Search"
          class="w-4 h-4 text-gray-400 group-focus-within:text-primary"
        ></lucide-icon>
      </div>
      <input
        [formControl]="searchControl"
        type="text"
        placeholder="Search by Product Name or SKU..."
        class="block w-full pl-11 pr-4 py-3 border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-surface-dark text-primary dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all text-sm font-medium shadow-sm"
      />
    </div>
  </div>

  <!-- Inventory List -->
  <div class="space-y-6">
    <div
      *ngFor="let product of filteredProducts"
      class="bg-white dark:bg-surface-dark rounded-2xl border border-gray-100 dark:border-gray-800 shadow-sm overflow-hidden hover:shadow-md transition-shadow duration-300"
    >
      <!-- Product Header -->
      <div
        class="p-5 border-b border-gray-100 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-800/20 flex items-center gap-4"
      >
        <img
          [src]="product.imageUrl || '/assets/placeholder.png'"
          class="w-12 h-12 rounded-lg object-cover border border-gray-200 dark:border-gray-700 bg-white"
          alt=""
        />
        <div>
          <h3 class="font-bold text-lg text-primary dark:text-white">
            {{ product.productName }}
          </h3>
          <p class="text-xs text-gray-500 font-mono">
            SKU: {{ product.productSku }}
          </p>
        </div>
        <div class="ml-auto text-right">
          <span class="text-xs text-gray-400 uppercase font-bold tracking-wider"
            >Total Stock</span
          >
          <p class="text-xl font-black text-primary dark:text-white">
            {{ product.totalStock }}
          </p>
        </div>
      </div>

      <!-- Variants Table -->
      <div class="overflow-x-auto">
        <table class="w-full text-left border-collapse">
          <thead>
            <tr
              class="border-b border-gray-100 dark:border-gray-800 text-xs font-bold text-gray-500 uppercase tracking-wider bg-white dark:bg-surface-dark"
            >
              <th class="p-4 pl-6 w-1/3">Variant (Size)</th>
              <th class="p-4 w-1/3">SKU</th>
              <th class="p-4 pr-6 text-right w-1/3">Stock Level</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-50 dark:divide-gray-800">
            <tr
              *ngFor="let variant of product.variants"
              class="group hover:bg-gray-50 dark:hover:bg-gray-800/30 transition-colors"
            >
              <td class="p-4 pl-6">
                <span
                  class="font-bold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-sm"
                  >{{ variant.size }}</span
                >
              </td>
              <td class="p-4 text-sm text-gray-500 font-mono">
                {{ variant.sku || "-" }}
              </td>
              <td class="p-4 pr-6 text-right">
                <div class="flex items-center justify-end gap-2">
                  <span
                    *ngIf="variant.stockQuantity <= 5"
                    class="text-xs font-bold text-red-500 bg-red-50 dark:bg-red-900/20 px-2 py-1 rounded-full animate-pulse"
                    >Low Stock</span
                  >

                  <div
                    class="flex items-center border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden bg-white dark:bg-surface-dark focus-within:ring-2 focus-within:ring-primary/20 transition-all"
                  >
                    <input
                      type="number"
                      [value]="variant.stockQuantity"
                      (change)="updateStock(variant, $event)"
                      class="w-20 p-2 text-center text-sm font-bold text-primary dark:text-white border-none focus:ring-0 bg-transparent"
                    />
                  </div>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Empty State -->
    <div
      *ngIf="filteredProducts.length === 0"
      class="p-12 text-center text-gray-500 dark:text-gray-400 bg-white dark:bg-surface-dark rounded-2xl border border-gray-100 dark:border-gray-800 border-dashed"
    >
      <lucide-icon
        [img]="icons.Package"
        class="w-12 h-12 text-gray-300 mb-2"
      ></lucide-icon>
      <p class="text-lg font-medium">No products found</p>
    </div>
  </div>
</div>
